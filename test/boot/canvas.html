<!DOCTYPE html>
<html>
<title>
</title>

<body>

    <p>第1题</p>
    <canvas id="canvas1" width="605" height="605"></canvas>
    <p>第2(1)题</p>
    <canvas id="canvas21" width="605" height="605"></canvas>
    <p>第2(2)题</p>
    <canvas id="canvas22" width="605" height="605"></canvas>
    <p>第3题</p>
    <canvas id="canvas3" width="605" height="605"></canvas>
    <p>第4题</p>
    <canvas id="canvas4" width="605" height="605"></canvas>
</body>
<script>
    var canvas = document.getElementById("canvas4");
    var cxt4 = canvas.getContext("2d");
    canvas = document.getElementById("canvas3");
    var cxt3 = canvas.getContext("2d");
    canvas = document.getElementById("canvas22");
    var cxt22 = canvas.getContext("2d");
    canvas = document.getElementById("canvas21");
    var cxt21 = canvas.getContext("2d");
    canvas = document.getElementById("canvas1");
    var cxt1 = canvas.getContext("2d");
    // var counterClockwise = false;
    class point {
        constructor(x, y) {
            this.x = x;
            this.y = y;
        }
    }

    function sub(a, b) {
        return new point(Math.abs((a.x + b.x) / 2), Math.abs((a.y + b.y) / 2));
    }
    var red = new point(5, 5);
    var blue = new point(305, 600 * Math.sin(Math.PI / 3) + 5);
    var green = new point(605, 5);

    function draw(cxt, point, style = "black", size = 3) {
        cxt.fillStyle = style;
        cxt.beginPath();
        cxt.arc(point.x, point.y, size, 0, Math.PI * 2, true);
        cxt.closePath();
        cxt.fill();
    }

    function com_len(points, edges) {
        let min1 = 2000;
        let flag1 = 0;
        let flag2 = 0;
        let min2 = 2000;
        for (let i = 0; i < edges.length; i++) {
            let len = Math.sqrt(Math.pow(points[1].x - edges[i].x, 2) + Math.pow(points[1].y - edges[i].y, 2));
            // console.log(`fc${len}`);
            if (len < min1) {
                min1 = len;
                flag1 = i;
            }
        }
        for (let i = 0; i < edges.length; i++) {
            let len = Math.sqrt(Math.pow(points[0].x - edges[i].x, 2) + Math.pow(points[0].y - edges[i].y, 2));
            // console.log(`fk${len}`);
            if (len < min2) {
                min2 = len;
                flag2 = i;
            }
        }
        // console.log(min1, min2);
        return [flag1, flag2];
    }

    var points1 = new Array();
    points1.push(new point(0, 0));
    points1.push(new point(0, 600));
    points1.push(new point(600, 600));
    points1.push(new point(600, 0));
    colors1 = ["red", "blue", "green", "yellow", "pink"];
    var points2 = new Array();
    points2.push(new point(300, 0));
    points2.push(new point(300 - 300 * Math.cos(Math.PI / 10), 300 - 300 * Math.sin(Math.PI / 10)));
    points2.push(new point(300 + 300 * Math.cos(Math.PI / 10), 300 - 300 * Math.sin(Math.PI / 10)));
    points2.push(new point(300 - 300 * Math.cos(Math.PI / 180 * 54), 300 + 300 * Math.sin(Math.PI / 180 * 54)));
    points2.push(new point(300 + 300 * Math.cos(Math.PI / 180 * 54), 300 + 300 * Math.sin(Math.PI / 180 * 54)));

    function com_draw(cxt, points, colors, limit, how) {
        let nums = points.length;
        for (let i = 0; i < nums; i++) {
            draw(cxt, points[i], colors[i], 5);
        }
        let old_point = new point(100, 100);
        draw(cxt, old_point);
        for (let i = 0; i < 10000; i++) {
            let ran = Math.floor(Math.random() * nums);
            for (let j = 0; j < nums; j++) {
                // console.log(ran);
                if (j == ran) {
                    let newpoint = how(points[j], old_point);
                    if (limit(newpoint, old_point, points)) {
                        i--;
                        // continue;
                        // console.log("fff")
                        break;
                    }
                    draw(cxt, newpoint, style = colors[j]);
                    old_point = newpoint;
                    break;
                }
            }
        }
    }
    com_draw(cxt1, [red, blue, green], ["red", "blue", "green"], (point1, point2, points) => {
        return false;
    }, sub); //第一题参数

    com_draw(cxt21, points1, colors1, (point1, point2, points) => {
        a = com_len([point1, point2], points);
        return a[0] == a[1] ? true : false;
    }, sub); //第二题(1)

    com_draw(cxt22, points2, colors1, (point1, point2, points) => {
        a = com_len([point1, point2], points);
        return a[0] == a[1] ? true : false;
    }, sub); //第二题(2)

    com_draw(cxt3, points1, colors1, (point1, point2, points) => {
        a = com_len([point1, point2], points);
        return Math.abs(a[0] - a[1]) == 2 ? true : false;
    }, sub); //第三题

    com_draw(cxt4, points2, colors1, () => {
        return false;
    }, (a, b) => {
        return new point(b.x + (a.x - b.x) * 0.618, b.y + ((a.y - b.y) * 0.618));
    }); //第四题
</script>

</html>